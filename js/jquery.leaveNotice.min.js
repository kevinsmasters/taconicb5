/*
 * LeaveNotice - plug in to notify users of leaving your site
 * Examples and documentation at: http://rewdy.com/tools/leavenotice-jquery-plugin
 * Version: 1.1.4 (01/30/2020)
 * Copyright (c) 2012 Andrew Meyer
 * Licensed under the MIT License: http://en.wikipedia.org/wiki/MIT_License
 * Requires: jQuery v1.4+
*/

!function(s){function d(e,n){0<e.timeOut&&clearTimeout(n),s("#"+e.overlayId+", #"+e.messageHolderId).fadeOut("fast",function(){s("#"+e.overlayId+", #"+e.messageHolderId).remove()}),s(document).unbind("keyup")}s.fn.leaveNotice=function(e){var n={siteName:window.location.href,exitMessage:"<p><strong>You have requested a website outside of {SITENAME}.</strong></p><p>Thank you for visiting.</p>",preLinkMessage:"<div class='setoff'><p>You will now be directed to:<br/>{URL}</p></div>",closeMessage:"",linkString:"",newWindow:!1,timeOut:4e3,overlayId:"ln-blackout",messageBoxId:"ln-messageBox",messageHolderId:"ln-messageHolder",linkId:"ln-link",displayUrlLength:50,overlayAlpha:.3},o=s.extend(n,e);return this.each(function(){el=s(this);var e=el.attr("href"),n=o.displayUrlLength;if(e.length>=n)var t="...";else t="";var i=e.substr(0,n)+t,a=el.attr("title");if(void 0===a||""==a)var l=i;else l=a;o.timeOut=o.newWindow?0:o.timeOut,el.click(function(){return s("body").append('<div id="'+o.overlayId+'"></div>'),s("body").append('<div id="'+o.messageHolderId+'"><div id="'+o.messageBoxId+'"></div></div>'),!1!==o.overlayAlpha&&s("#"+o.overlayId).css("opacity",o.overlayAlpha),preFilteredContent=o.exitMessage+o.preLinkMessage,msgContent=preFilteredContent.replace(/\{URL\}/g,'<a id="'+o.linkId+'" href="'+e+'" title="'+e+'"'+o.linkString+">"+l+"</a>"),msgContent=msgContent.replace(/\{SITENAME\}/g,o.siteName),o.closeMessage?(msgContent+=o.closeMessage,msgContent=msgContent.replace(/\{URL\}/g,'<a id="'+o.linkId+'" href="'+e+'" title="'+e+'"'+o.linkString+">"+l+"</a>")):0<o.timeOut?msgContent+='<p id="ln-cancelMessage"><a href="#close" id="ln-cancelLink">Cancel</a> or press the ESC key.</p>':msgContent+='<p id="ln-cancelMessage">Click the link above to continue or <a href="#close" id="ln-cancelLink">Cancel</a></p>',s("#"+o.messageBoxId).append(msgContent),leaveIn=0<o.timeOut&&setTimeout(function(){s("#ln-cancelMessage").html("<em>Loading...</em>"),window.location.href=e},o.timeOut),o.newWindow&&s("a#"+o.linkId).attr("target","_blank").click(function(){d(o,leaveIn)}),s("#ln-cancelLink").click(function(){return d(o,leaveIn),!1}),s(document).bind("keyup",function(e){27==e.which&&d(o,leaveIn)}),s(window).on("unload",function(e){d(o,leaveIn)}),!1})})}}(jQuery);
